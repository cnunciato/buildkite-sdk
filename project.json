{
    "targets": {
        "fetch": {
            "command": "curl -fs https://raw.githubusercontent.com/buildkite/pipeline-schema/refs/heads/main/schema.json -o libs/sdk/schema.json"
        },
        "gen:typescript": {
            "command": "json2ts --input ./libs/sdk/schema.json --output libs/sdk/typescript/src/schema.d.ts",
            "dependsOn": ["fetch"]
        },
        "gen:python": {
            "command": "quicktype --src ./libs/sdk/schema.json --lang python --out libs/sdk/python/src/schema.py",
            "dependsOn": ["fetch"]
        },
        "gen:go": {
            "command": "quicktype --src ./libs/sdk/schema.json --lang go --package buildkite --out libs/sdk/go/pkg/buildkite/schema.go",
            "dependsOn": ["fetch"]
        },
        "gen:all": {
            "dependsOn": ["gen:typescript", "gen:python", "gen:go"]
        },
        "test:all": {
            "dependsOn": [
                "lib-typescript:test",
                "lib-python:test",
                "lib-go:test",
                "app-typescript:test",
                "app-python:test",
                "app-go:test"
            ]
        }
    }
}
